---
title: "Experimental Design"
author: "Adriana Souza"
date: "June 15, 2018"
output:
   pdf_document:
      number_sections: true
---

```{r setup, include=FALSE}
library(tidyverse)
library(kableExtra)
```

# Goals 

1. Constrain treatment number, size and distribution in the context of permitting requirements and logistical matters

2. Conduct power analysis for deliverables based on proposed experimental design, inventory practices and preliminary data.

3. Do both 1 & 2 using annotated code in a version controlled format

# Objectives 

## Constrain experimental design based on expected mulch volume, permit limits for fill and effective mulch depths

a. Estimate total volume of invasive plant biomass on spoil ridges

```{r total_volume, warning=FALSE, message=FALSE}
## Reading data

all_plots <- read.csv("plots.csv")
trees <- read.csv("trees.csv")

## Subsetting

# Subsetting trees to only Australian Pine
ap <- trees %>% filter(Species == "AP")

# Getting rid of weird formatting error, disregard
names(ap)[1] <- "PlotID" 
names(all_plots)[1] <- "PlotID"

# Subsetting Plots to exclude controls
plots <- subset(all_plots, (PlotID!=c("7", "8","9")))

# Aggregating invasive biomass per plot (note, there is no info for plots 7,8,9)
ap_agg <- aggregate(ap[, 11], list(ap$PlotID), mean)
names(ap_agg)[1] <- "PlotID"
names(ap_agg)[2] <- "PlotBiomass"
head(ap_agg) # Table


## Defining variables

# Plot Area
sml <- plots$SpoilMoundWidth # Spoil Mound Lenght
tl <- plots$SpoilMoundTransectLength # Transect Length
sma <- tl * 4 # Spoil Mound Area

# Invasive Biomass
ap_density <- 475 # ?? http://www.wood-database.com/austrian-pine/
invasive_volume <- ap_agg$PlotBiomass * 1/ap_density

# Target: avg_invasive_biomass_per_plot
target <- invasive_volume/sma

# New table
target_table <- data.frame(ap_agg, sml, tl, 
                           sma, invasive_volume, target)

# Table
target_table %>% 
  kable("latex", booktabs = TRUE) %>% 
  kable_styling(latex_options = "striped", "scale_down") # %>%
  #footnote(general = "Description of column names (they didn't fit in the page):",
          # number = c("sml: Spoil Mound Length", 
                      #"tl: Transect Length", 
                      #"sma: Spoil Mound Area", 
                      #"target: Average invasive biomass per plot"))
```


b. Estimate area corresponding to 25 cubic yards of fill in treatment ditch
c. Estimate depth of remaining mulch spread onto ridges
d. Propose scenarios for removal

## Assess adequacy of proposed vegetation inventory elements:

1. Element 1: plot size
  * Impact on biomass estimation error
  * Impact on seedling diversity estimation error

2. Element 2: plot distribution per treatment
  * Impact on removal / mulch treatment effect estimation error
